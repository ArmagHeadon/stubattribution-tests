[tox]
envlist = py27, flake8
skipsdist = true

[testenv]
deps = -rrequirements.txt
passenv = PYTEST_ADDOPTS PYTEST_BASE_URL SAUCELABS_API_KEY SAUCELABS_USERNAME \
    JENKINS_URL JOB_NAME BUILD_NUMBER
commands = pytest --driver=SauceLabs \
    --capability browserName Chrome \
    --capability platform "Windows 10" \
    --junit-xml=results/{envname}.xml \
    --html=results/{envname}.html \
    --log-raw=results/{envname}.log \
    {posargs:tests}

[testenv:flake8]
skip_install = true
deps = flake8
commands = flake8 {posargs:.}
